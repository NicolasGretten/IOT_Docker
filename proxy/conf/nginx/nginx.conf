worker_processes 2;
events {
    worker_connections  1024;
}

http {
    include            mime.types;
    default_type       application/octet-stream;
    access_log         /var/log/nginx/nginx-access.log;
    error_log          /var/log/nginx/nginx-error.log;
    sendfile           on;
    keepalive_timeout  65;
    server_names_hash_bucket_size 64;
    client_max_body_size 100M;

    # LOCALHOST
#   server {
#       server_name api.collectandverything.io;
#       listen 80;
#       location / {
#           proxy_set_header Host $host;
#           proxy_pass http://api-nginx:80;
#           proxy_set_header X-Real-IP         $remote_addr;
#           proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
#           proxy_set_header X-Forwarded-Proto $scheme;
#           proxy_set_header X-Forwarded-Host  $host;
#           proxy_set_header X-Forwarded-Port  $server_port;
#       }
#   }

#    server {
#           server_name user.collectandverything.io;
#           listen 80;
#           location / {
#               proxy_set_header Host $host;
#               proxy_pass http://user-nginx:80;
#               proxy_set_header X-Real-IP         $remote_addr;
#               proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
#               proxy_set_header X-Forwarded-Proto $scheme;
#               proxy_set_header X-Forwarded-Host  $host;
#               proxy_set_header X-Forwarded-Port  $server_port;
#           }
#       }

#    server {
#        server_name address.collectandverything.io;
#        listen 80;
#        location / {
#            proxy_set_header Host $host;
#            proxy_pass http://address-nginx:80;
#            proxy_set_header X-Real-IP         $remote_addr;
#            proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
#            proxy_set_header X-Forwarded-Proto $scheme;
#            proxy_set_header X-Forwarded-Host  $host;
#            proxy_set_header X-Forwarded-Port  $server_port;
#        }
#    }
#   server {
#      server_name store.collectandverything.io;
#      listen 80;
#      location / {
#          proxy_set_header Host $host;
#          proxy_pass http://store-nginx:80;
#          proxy_set_header X-Real-IP         $remote_addr;
#          proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
#          proxy_set_header X-Forwarded-Proto $scheme;
#          proxy_set_header X-Forwarded-Host  $host;
#          proxy_set_header X-Forwarded-Port  $server_port;
#      }
#  }

#  server {
#         server_name image.collectandverything.io;
#         listen 80;
#         location / {
#             proxy_set_header Host $host;
#             proxy_pass http://image-nginx:80;
#             proxy_set_header X-Real-IP         $remote_addr;
#             proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
#             proxy_set_header X-Forwarded-Proto $scheme;
#             proxy_set_header X-Forwarded-Host  $host;
#             proxy_set_header X-Forwarded-Port  $server_port;
#         }
#     }

#  server {
#       server_name employee.collectandverything.io;
#       listen 80;
#       location / {
#           proxy_set_header Host $host;
#           proxy_pass http://employee-nginx:80;
#           proxy_set_header X-Real-IP         $remote_addr;
#           proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
#           proxy_set_header X-Forwarded-Proto $scheme;
#           proxy_set_header X-Forwarded-Host  $host;
#           proxy_set_header X-Forwarded-Port  $server_port;
#       }
#   }

#   server {
#       server_name admin.collectandverything.io;
#       listen 80;
#       location / {
#           proxy_set_header Host $host;
#           proxy_pass http://admin-nginx:80;
#           proxy_set_header X-Real-IP         $remote_addr;
#           proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
#           proxy_set_header X-Forwarded-Proto $scheme;
#           proxy_set_header X-Forwarded-Host  $host;
#           proxy_set_header X-Forwarded-Port  $server_port;
#       }
#   }

#   server {
#       server_name mail.collectandverything.io;
#       listen 80;
#       location / {
#           proxy_set_header Host $host;
#           proxy_pass http://mail-nginx:80;
#           proxy_set_header X-Real-IP         $remote_addr;
#           proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
#           proxy_set_header X-Forwarded-Proto $scheme;
#           proxy_set_header X-Forwarded-Host  $host;
#           proxy_set_header X-Forwarded-Port  $server_port;
#       }
#   }

#   server {
#           server_name product.collectandverything.io;
#           listen 80;
#           location / {
#               proxy_set_header Host $host;
#               proxy_pass http://product-nginx:80;
#               proxy_set_header X-Real-IP         $remote_addr;
#               proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
#               proxy_set_header X-Forwarded-Proto $scheme;
#               proxy_set_header X-Forwarded-Host  $host;
#               proxy_set_header X-Forwarded-Port  $server_port;
#           }
#       }

#    server {
#               server_name cart.collectandverything.io;
#               listen 80;
#               location / {
#                   proxy_set_header Host $host;
#                   proxy_pass http://cart-nginx:80;
#                   proxy_set_header X-Real-IP         $remote_addr;
#                   proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
#                   proxy_set_header X-Forwarded-Proto $scheme;
#                   proxy_set_header X-Forwarded-Host  $host;
#                   proxy_set_header X-Forwarded-Port  $server_port;
#               }
#           }

#    server {
#        server_name order.collectandverything.io;
#        listen 80;
#        location / {
#            proxy_set_header Host $host;
#            proxy_pass http://order-nginx:80;
#            proxy_set_header X-Real-IP         $remote_addr;
#            proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
#            proxy_set_header X-Forwarded-Proto $scheme;
#            proxy_set_header X-Forwarded-Host  $host;
#            proxy_set_header X-Forwarded-Port  $server_port;
#        }
#    }
#   server {
#        server_name dashboard.collectandverything.fr;
#        listen 80;
#        location / {
#            proxy_set_header Host $host;
#            proxy_pass http://dashboard-docker:9000;
#            proxy_set_header X-Real-IP         $remote_addr;
#            proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
#            proxy_set_header X-Forwarded-Proto $scheme;
#            proxy_set_header X-Forwarded-Host  $host;
#            proxy_set_header X-Forwarded-Port  $server_port;
#        }
#    }
#
#    server {
#        server_name backoffice.collectandverything.fr;
#        listen 80;
#        location / {
#            proxy_set_header Host $host;
#            proxy_pass http://backoffice-docker:9000;
#            proxy_set_header X-Real-IP         $remote_addr;
#            proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
#            proxy_set_header X-Forwarded-Proto $scheme;
#            proxy_set_header X-Forwarded-Host  $host;
#            proxy_set_header X-Forwarded-Port  $server_port;
#        }
#    }

#    #STAGING
#   server {
#       server_name staging.api.collectandverything.fr;
#       listen 80;
#       location / {
#           proxy_set_header Host $host;
#           proxy_pass http://api-nginx:80;
#           proxy_set_header X-Real-IP         $remote_addr;
#           proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
#           proxy_set_header X-Forwarded-Proto $scheme;
#           proxy_set_header X-Forwarded-Host  $host;
#           proxy_set_header X-Forwarded-Port  $server_port;
#       }
#   }
#
#   server {
#       server_name staging.collectandverything.fr;
#       listen 80;
#       location / {
#           proxy_set_header Host $host;
#           proxy_pass http://www-docker:9000;
#           proxy_set_header X-Real-IP         $remote_addr;
#           proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
#           proxy_set_header X-Forwarded-Proto $scheme;
#           proxy_set_header X-Forwarded-Host  $host;
#           proxy_set_header X-Forwarded-Port  $server_port;
#       }
#   }
#
#   server {
#       server_name www.staging.collectandverything.fr;
#       listen 80;
#       return 301 https://staging.collectandverything.fr$request_uri;
#   }
#
    # PROD
#    server {
#        server_name dashboard.collectandverything.fr;
#        listen 80;
#        location / {
#            proxy_set_header Host $host;
#            proxy_pass http://dashboard-docker:9000;
#            proxy_set_header X-Real-IP         $remote_addr;
#            proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
#            proxy_set_header X-Forwarded-Proto $scheme;
#            proxy_set_header X-Forwarded-Host  $host;
#            proxy_set_header X-Forwarded-Port  $server_port;
#        }
#    }
#
#    server {
#        server_name backoffice.collectandverything.fr;
#        listen 80;
#        location / {
#            proxy_set_header Host $host;
#            proxy_pass http://backoffice-docker:9000;
#            proxy_set_header X-Real-IP         $remote_addr;
#            proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
#            proxy_set_header X-Forwarded-Proto $scheme;
#            proxy_set_header X-Forwarded-Host  $host;
#            proxy_set_header X-Forwarded-Port  $server_port;
#        }
#    }
#
#
#   server {
#       server_name collectandverything.fr;
#       listen 80;
#       location / {
#           proxy_set_header Host $host;
#           proxy_pass http://www-docker:9000;
#           proxy_set_header X-Real-IP         $remote_addr;
#           proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
#           proxy_set_header X-Forwarded-Proto $scheme;
#           proxy_set_header X-Forwarded-Host  $host;
#           proxy_set_header X-Forwarded-Port  $server_port;
#       }
#   }
   server {
       server_name collectandverything.fr;
       listen 80;
       location / {
           proxy_set_header Host $http_host;
           proxy_pass http://api-nginx:80;
           proxy_set_header X-Real-IP         $remote_addr;
           proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
           proxy_set_header X-Forwarded-Proto $scheme;
           proxy_set_header X-Forwarded-Host  $host;
           proxy_set_header X-Forwarded-Port  $server_port;
           proxy_redirect off;
       }
   }

    server {
        server_name www.collectandverything.fr;
        listen 80;
        return 301 https://collectandverything.fr$request_uri;
    }
}
